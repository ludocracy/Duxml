#!/usr/bin/env ruby
require File.expand_path(File.dirname(__FILE__) + '/../lib/duxml')

include Duxml

DITA_GRAMMAR_FILE = File.expand_path(File.dirname(__FILE__) + '/../xml/test_grammar.xml')
xml_file = ARGV.first
log_file = ARGV[1] || 'log.txt'

load xml_file
puts "loaded XML file: #{xml_file}"
meta.grammar = DITA_GRAMMAR_FILE
puts "loaded grammar file: #{DITA_GRAMMAR_FILE}"
validate
puts "validation complete"
log log_file
puts "logged errors to #{log_file}"